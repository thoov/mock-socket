!function e(t,n,r){function s(i,c){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(o)return o(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return s(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e){var t=e("./service"),n=e("./mock-server"),r=e("./mock-socket"),s=e("./helpers/global-context");s.SocketService=t,s.MockSocket=r,s.MockServer=n},{"./helpers/global-context":3,"./mock-server":7,"./mock-socket":8,"./service":9}],2:[function(e,t){function n(e,t){r.setTimeout(function(t){e.call(t)},4,t)}var r=e("./global-context");t.exports=n},{"./global-context":3}],3:[function(e,t){(function(e){var n=window||e;if(!n)throw new Error("Unable to set the global context to either window or global.");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){function n(e,t,n){var r=!1,s=!1,o="",i=null,c=null,l=null;try{var a=new MessageEvent(e);a.initMessageEvent(e,r,s,t,n,o),Object.defineProperties(a,{target:{get:function(){return l},set:function(e){l=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}catch(u){var a={type:e,bubbles:r,cancelable:s,data:t,origin:n,lastEventId:o,source:i,ports:c,defaultPrevented:!1,returnValue:!0,clipboardData:void 0};Object.defineProperties(a,{target:{get:function(){return l},set:function(e){l=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}return a}t.exports=n},{}],5:[function(e,t){function n(e){var t=document.createElement("a");return t.href=e,"/"!==t.pathname&&""!==t.pathname||"/"===e.slice(-1)||(e+="/"),e}t.exports=n},{}],6:[function(e,t){function n(e){var t=function(t){return function(n){n.target=e,t.apply(e,arguments)}};Object.defineProperties(e,{onopen:{enumerable:!0,get:function(){return this._onopen},set:function(n){this._onopen=t(n),this.service.setCallbackObserver("clientOnOpen",this._onopen,e)}},onmessage:{enumerable:!0,get:function(){return this._onmessage},set:function(n){this._onmessage=t(n),this.service.setCallbackObserver("clientOnMessage",this._onmessage,e)}},onclose:{enumerable:!0,get:function(){return this._onclose},set:function(n){this._onclose=t(n),this.service.setCallbackObserver("clientHasLeft",this._onclose,e)}},onerror:{enumerable:!0,get:function(){return this._onerror},set:function(n){this._onerror=t(n),this.service.setCallbackObserver("clientOnError",this._onerror,e)}}})}t.exports=n},{}],7:[function(e,t){function n(e){var t=new r;this.url=o(e),c.MockSocket.services[this.url]=t,this.service=t,t.server=this}var r=e("./service"),s=e("./helpers/delay"),o=e("./helpers/url-transform"),i=e("./helpers/message-event"),c=e("./helpers/global-context");n.prototype={service:null,on:function(e,t){var n;if("function"!=typeof t)return!1;switch(e){case"connection":n="clientHasJoined";break;case"message":n="clientHasSentMessage";break;case"close":n="clientHasLeft"}"string"==typeof n&&this.service.setCallbackObserver(n,t,this)},send:function(e){s(function(){this.service.sendMessageToClients(i("message",e,this.url))},this)},close:function(){s(function(){this.service.closeConnection(i("close",null,this.url))},this)}},t.exports=n},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/url-transform":5,"./service":9}],8:[function(e,t){function n(e){this.binaryType="blob",this.url=s(e),this.readyState=i.MockSocket.CONNECTING,this.service=i.MockSocket.services[this.url],c(this),r(function(){this.service.clientIsConnecting(this,this._updateReadyState)},this)}var r=e("./helpers/delay"),s=e("./helpers/url-transform"),o=e("./helpers/message-event"),i=e("./helpers/global-context"),c=e("./helpers/websocket-properties");n.CONNECTING=0,n.OPEN=1,n.CLOSING=2,n.LOADING=3,n.CLOSED=4,n.services={},n.prototype={_onopen:null,_onmessage:null,_onerror:null,_onclose:null,service:null,send:function(e){r(function(){this.service.sendMessageToServer(o("message",e,this.url))},this)},close:function(){r(function(){this.service.closeConnection(o("close",null,this.url))},this)},_updateReadyState:function(e){e>=0&&4>=e&&(this.readyState=e)}},t.exports=n},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/url-transform":5,"./helpers/websocket-properties":6}],9:[function(e,t){function n(){this.list={}}var r=e("./helpers/message-event"),s=e("./helpers/global-context");n.prototype={server:null,clientIsConnecting:function(e,t){return this.observe("updateReadyState",t,e),this.server?(this.notifyOnlyFor(e,"updateReadyState",s.MockSocket.OPEN),this.notify("clientHasJoined",this.server),void this.notifyOnlyFor(e,"clientOnOpen",r("open",null,this.server.url))):(this.notify(e,"updateReadyState",s.MockSocket.CLOSED),this.notifyOnlyFor(e,"clientOnError"),!1)},closeConnection:function(e){this.notify("updateReadyState",s.MockSocket.CLOSED),this.notify("clientHasLeft",e)},sendMessageToServer:function(e){this.notify("clientHasSentMessage",e)},sendMessageToClients:function(e){this.notify("clientOnMessage",e)},setCallbackObserver:function(e,t,n){this.observe(e,t,n)},observe:function(e,t,n){return"string"!=typeof e||"function"!=typeof t||n&&"object"!=typeof n?!1:(this.list[e]||(this.list[e]=[]),void this.list[e].push({callback:t,context:n}))},clearAll:function(e){return this.verifyNamespaceArg(e)?void(this.list[e]=[]):!1},notify:function(e){var t=Array.prototype.slice.call(arguments,1);if(!this.verifyNamespaceArg(e))return!1;for(var n=0,r=this.list[e].length;r>n;n++)this.list[e][n].callback.apply(this.list[e][n].context,t)},notifyOnlyFor:function(e,t){var n=Array.prototype.slice.call(arguments,2);if(!this.verifyNamespaceArg(t))return!1;for(var r=0,s=this.list[t].length;s>r;r++)this.list[t][r].context===e&&this.list[t][r].callback.apply(this.list[t][r].context,n)},verifyNamespaceArg:function(e){return"string"==typeof e&&this.list[e]?!0:!1}},t.exports=n},{"./helpers/global-context":3,"./helpers/message-event":4}]},{},[1]);