!function e(t,n,r){function s(o,l){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!l&&c)return c(o,!0);if(i)return i(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return s(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e){var t=e("./service"),n=e("./mock-server"),r=e("./mock-socket"),s=e("./helpers/global-context");s.SocketService=t,s.MockSocket=r,s.MockServer=n},{"./helpers/global-context":3,"./mock-server":7,"./mock-socket":8,"./service":9}],2:[function(e,t){function n(e,t){r.setTimeout(function(t){e.call(t)},4,t)}var r=e("./global-context");t.exports=n},{"./global-context":3}],3:[function(e,t){(function(e){var n;if(n="undefined"==typeof window?e:window,!n)throw new Error("Unable to set the global context to either window or global.");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){function n(e,t,n){var r=null,s=null,i=!1,o=!1,l="",c=null;try{var a=new MessageEvent(e);a.initMessageEvent(e,i,o,t,n,l),Object.defineProperties(a,{target:{get:function(){return c},set:function(e){c=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}catch(u){var a={type:e,bubbles:i,cancelable:o,data:t,origin:n,lastEventId:l,source:s,ports:r,defaultPrevented:!1,returnValue:!0,clipboardData:void 0};Object.defineProperties(a,{target:{get:function(){return c},set:function(e){c=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}return a}t.exports=n},{}],5:[function(e,t){function n(e){var t=s("path",e),n=s("?",e);return n=n?"?"+n:"",""===t?e.split("?")[0]+"/"+n:e}function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e,t){var n=t||window.location.toString();if(!e)return n;e=e.toString(),"//"===n.substring(0,2)?n="http:"+n:1===n.split("://").length&&(n="http://"+n),t=n.split("/");var s={auth:""},i=t[2].split("@");1===i.length?i=i[0].split(":"):(s.auth=i[0],i=i[1].split(":")),s.protocol=t[0],s.hostname=i[0],s.port=i[1]||("https"===s.protocol.split(":")[0].toLowerCase()?"443":"80"),s.pathname=(t.length>3?"/":"")+t.slice(3,t.length).join("/").split("?")[0].split("#")[0];var o=s.pathname;"/"===o.charAt(o.length-1)&&(o=o.substring(0,o.length-1));var l=s.hostname,c=l.split("."),a=o.split("/");if("hostname"===e)return l;if("domain"===e)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(l)?l:c.slice(-2).join(".");if("sub"===e)return c.slice(0,c.length-2).join(".");if("port"===e)return s.port;if("protocol"===e)return s.protocol.split(":")[0];if("auth"===e)return s.auth;if("user"===e)return s.auth.split(":")[0];if("pass"===e)return s.auth.split(":")[1]||"";if("path"===e)return s.pathname;if("."===e.charAt(0)){if(e=e.substring(1),r(e))return e=parseInt(e,10),c[0>e?c.length+e:e-1]||""}else{if(r(e))return e=parseInt(e,10),a[0>e?a.length+e:e]||"";if("file"===e)return a.slice(-1)[0];if("filename"===e)return a.slice(-1)[0].split(".")[0];if("fileext"===e)return a.slice(-1)[0].split(".")[1]||"";if("?"===e.charAt(0)||"#"===e.charAt(0)){var u=n,h=null;if("?"===e.charAt(0)?u=(u.split("?")[1]||"").split("#")[0]:"#"===e.charAt(0)&&(u=u.split("#")[1]||""),!e.charAt(1))return u;e=e.substring(1),u=u.split("&");for(var f=0,p=u.length;p>f;f++)if(h=u[f].split("="),h[0]===e)return h[1]||"";return null}}return""}t.exports=n},{}],6:[function(e,t){function n(e){var t=function(t){return function(n){n.target=e,t.apply(e,arguments)}};Object.defineProperties(e,{onopen:{enumerable:!0,get:function(){return this._onopen},set:function(n){this._onopen=t(n),this.service.setCallbackObserver("clientOnOpen",this._onopen,e)}},onmessage:{enumerable:!0,get:function(){return this._onmessage},set:function(n){this._onmessage=t(n),this.service.setCallbackObserver("clientOnMessage",this._onmessage,e)}},onclose:{enumerable:!0,get:function(){return this._onclose},set:function(n){this._onclose=t(n),this.service.setCallbackObserver("clientOnclose",this._onclose,e)}},onerror:{enumerable:!0,get:function(){return this._onerror},set:function(n){this._onerror=t(n),this.service.setCallbackObserver("clientOnError",this._onerror,e)}}})}t.exports=n},{}],7:[function(e,t){function n(e){var t=new r;this.url=i(e),l.MockSocket.services[this.url]=t,this.service=t,t.server=this}var r=e("./service"),s=e("./helpers/delay"),i=e("./helpers/url-transform"),o=e("./helpers/message-event"),l=e("./helpers/global-context");n.prototype={service:null,on:function(e,t){var n;if("function"!=typeof t||"string"!=typeof e)return!1;switch(e){case"connection":n="clientHasJoined";break;case"message":n="clientHasSentMessage";break;case"close":n="clientHasLeft"}"string"==typeof n&&(this.service.clearAll(n),this.service.setCallbackObserver(n,t,this))},send:function(e){s(function(){this.service.sendMessageToClients(o("message",e,this.url))},this)},close:function(){s(function(){this.service.closeConnectionFromServer(o("close",null,this.url))},this)}},t.exports=n},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/url-transform":5,"./service":9}],8:[function(e,t){function n(e){this.binaryType="blob",this.url=s(e),this.readyState=o.MockSocket.CONNECTING,this.service=o.MockSocket.services[this.url],l(this),r(function(){this.service.clientIsConnecting(this,this._updateReadyState)},this)}var r=e("./helpers/delay"),s=e("./helpers/url-transform"),i=e("./helpers/message-event"),o=e("./helpers/global-context"),l=e("./helpers/websocket-properties");n.CONNECTING=0,n.OPEN=1,n.CLOSING=2,n.LOADING=3,n.CLOSED=4,n.services={},n.prototype={_onopen:null,_onmessage:null,_onerror:null,_onclose:null,service:null,send:function(e){r(function(){this.service.sendMessageToServer(i("message",e,this.url))},this)},close:function(){r(function(){this.service.closeConnectionFromClient(i("close",null,this.url),this)},this)},_updateReadyState:function(e){e>=0&&4>=e&&(this.readyState=e)}},t.exports=n},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/url-transform":5,"./helpers/websocket-properties":6}],9:[function(e,t){function n(){this.list={}}var r=e("./helpers/message-event"),s=e("./helpers/global-context");n.prototype={server:null,clientIsConnecting:function(e,t){return this.observe("updateReadyState",t,e),this.server?(this.notifyOnlyFor(e,"updateReadyState",s.MockSocket.OPEN),this.notify("clientHasJoined",this.server),void this.notifyOnlyFor(e,"clientOnOpen",r("open",null,this.server.url))):(this.notify(e,"updateReadyState",s.MockSocket.CLOSED),this.notifyOnlyFor(e,"clientOnError"),!1)},closeConnectionFromServer:function(e){this.notify("updateReadyState",s.MockSocket.CLOSING),this.notify("clientOnclose",e),this.notify("updateReadyState",s.MockSocket.CLOSED),this.notify("clientHasLeft")},closeConnectionFromClient:function(e,t){t.readyState===s.MockSocket.OPEN&&(this.notifyOnlyFor(t,"updateReadyState",s.MockSocket.CLOSING),this.notifyOnlyFor(t,"clientOnclose",e),this.notifyOnlyFor(t,"updateReadyState",s.MockSocket.CLOSED),this.notify("clientHasLeft"))},sendMessageToServer:function(e){this.notify("clientHasSentMessage",e.data,e)},sendMessageToClients:function(e){this.notify("clientOnMessage",e)},setCallbackObserver:function(e,t,n){this.observe(e,t,n)},observe:function(e,t,n){return"string"!=typeof e||"function"!=typeof t||n&&"object"!=typeof n?!1:(this.list[e]||(this.list[e]=[]),void this.list[e].push({callback:t,context:n}))},clearAll:function(e){return this.verifyNamespaceArg(e)?void(this.list[e]=[]):!1},notify:function(e){var t=Array.prototype.slice.call(arguments,1);if(!this.verifyNamespaceArg(e))return!1;for(var n=0,r=this.list[e].length;r>n;n++)this.list[e][n].callback.apply(this.list[e][n].context,t)},notifyOnlyFor:function(e,t){var n=Array.prototype.slice.call(arguments,2);if(!this.verifyNamespaceArg(t))return!1;for(var r=0,s=this.list[t].length;s>r;r++)this.list[t][r].context===e&&this.list[t][r].callback.apply(this.list[t][r].context,n)},verifyNamespaceArg:function(e){return"string"==typeof e&&this.list[e]?!0:!1}},t.exports=n},{"./helpers/global-context":3,"./helpers/message-event":4}]},{},[1]);